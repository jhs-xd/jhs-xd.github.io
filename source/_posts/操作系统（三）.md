---
title: 操作系统（三）
copyright: true
categories: 
  - 《计算机操作系统》
tags: 
  - OS

---
<blockquote class="blockquote-center">Our destiny offers not the cup of despair,but the chalice of opportunity. ——Richard Nixon
![](/myimages/14.jpg)<blockquote>

处理机调度与死锁

<!-- more -->

---

# 处理机调度的层次 #
- 处理机是最重要的计算机资源，在并发的系统中，需要系统能按照某种算法，动态地把处理机分配给就绪队列中的一个进程，使之执行
- 调度性能的好坏决定着处理机利用率
- 一个批处理作业需要经历三级调度：高级调度、中级调度、低级调度，每一级调度采用不同的调度方式和调度算法

## 高级调度/作业调度/长程调度 ##
1. 功能：把外存上处于后备队列的作业调入内存（批处理系统中，以作业为单位从外存调入内存）
2. 作业：比程序更为广泛的概念，不仅包含了通常的程序和数据，还应配有一份作业说明书
3. 作业控制块JCB
JCB是作业在系统中存在的标志，控制系统对作业进行管理和调度
4. 作业调度
根据JCB中的信息，从外存的后备队列中选取作业调入内存，并为他们创建进程，分配资源；再将新创建的进程插入就绪队列，准备执行（分时系统中不存在作业调度，因为任务直接进内存处理，以实现及时交互）

## 低级调度/进程调度/短程调度 ##
1. 功能：在内存就绪队列中，选择获得处理机的进程；分派处理机给进程（分派程序）；保存处理机的现场信息（如程序计数器、通用寄存器中的内容）
2. 进程调度方式
	-  非抢占方式
	-  抢占方式（优先权原则、短作业/进程优先原则、时间片原则）

## 中级调度 ##
1. 目的：提高内存利用率和系统吞吐量
2. 功能：把暂时不能运行的进程从内存调出到外存中挂起，可以运行时，再由中级调度重新调入内存，并将进程插入就绪队列，等待进程调度
3. 程序执行流程
（1）作业进入系统**（外存后备队列）**，创建JCB
（2）**作业调度**
	-  选作业
	-  创建进程
	-  分配资源
	-  申请并初始化PCB

 （3）进程进入内存**（内存就绪队列）**
 （4）**进程调度**

---

# 调度算法 #

## 先来先服务调度算法FCFS ##
1. 最简单的调度算法，可用于作业调度、进程调度
2. 有利于长作业（进程）、不利于短作业（进程）

## 短作业（进程）优先调度算法SJ(P)F ##

## 高优先权优先调度算法 ##
1. 可用于批处理系统中作业调度；也可用于实时系统中进程调度
2. 按中断的方式又分为：非抢占式优先权算法、抢占式优先权算法
3. 高响应比优先调度算法（动态优先权）
照顾了短作业优先算法时，长作业得不到处理机的问题；即随着时间的增长，长作业的优先级越来越高

## 基于时间片的轮转调度算法（分时系统） ##
1. 优点：能及时响应用户请求
2. 适用于分时系统的可抢占式的调度算法
3. 实现方法：由计时器发出时钟中断，引起一次轮转调度

## 多级反馈队列调度算法（性能最好） ##
1. 特点：事先不知道各种进程所需的执行时间
2. 实现：
	- 在内存中设置多个进程就绪队列，且每个队列的优先级不同，各个队列中的进程执行时间片不同（优先级高，时间片小）；
	- 一个新进程进入内存后，首先放入第一个队列（优先级最高）的末尾，按FCFS原则排队等待调度；
	- 进程在第一个队列执行完则撤离系统，未执行完则转入第二个队列的末尾；
	- 仅当第一个队列空闲时，才调度第二个队列的进程

---

# 死锁 #
1. 死锁：多个进程在运行过程中因争夺资源而陷入僵局
2. 死锁原因：（1）竞争资源（2）进程间推进顺序非法
3. 处理死锁的基本方法：
（1）预防死锁：设置限制条件
（2）避免死锁：在资源动态分配过程中，以某种方法防止系统进入不安全状态
（3）检测死锁：允许死锁，检测并清除之
（4）解除死锁：检测死锁并使之解脱